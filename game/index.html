<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Vue.js modal component example</title>
    <!-- Delete ".min" for console warnings in development -->
    <link rel="stylesheet" type="text/css" href="/assets/css/styles.css" />
    <style>
      button {
        background-color: white;
        border-radius: 5px;
        border: 0.5px solid lightgrey;
      }

      button:hover {box-shadow: 0 1px 1px #999;}
    </style>
  </head>
  <body>
    

    <!-- app -->
    <div id="app">
      <div class="padding-top">
        <div class="container center ">
          <h2>{{ data.result.positive.join(' + ') }} - {{ data.result.negative.join(' - ') }} = ?</h2>
          <br>
          <h2>
            <span v-for="key in data.result.game.options">
              <button style="margin:0.75em;" v-on:click="greet(key, data)">{{ key }} </button>
            </span>
          </h2>
          <p>Tu puntuaci√≥n <b>{{ data.score}}</b>.</p>

        </div>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.4/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-resource@1.3.4"></script>
    <script>

      var link = 'https://9lq7bsp4gl.execute-api.eu-west-1.amazonaws.com/dev/game?strike=1&game=0';
      
      var data = { 
          result: null,
          score: 0,
          strike: 1,
          response: null
      };

      Vue.http.get(link).then(function(response){
          data.result = response.data.result
      }, function(error){
          console.log(error);
      });


      new Vue ({
          el: '#app',
          data: data,
          methods: {
            greet: function (response, data) {
              if(response == data.result.game.answer){
                data.response = response
                data.score = data.score + data.result.game.points
              }else{
                data.response = response
                data.score = data.score - 1
              }

              data.strike += 1
              var link2 = `https://9lq7bsp4gl.execute-api.eu-west-1.amazonaws.com/dev/game?strike=${data.strike}&game=0`;
              Vue.http.get(link2).then(function(response){
                  data.result = response.data.result
              }, function(error){
                  console.log(error);
              });
            }
          }
      });

    </script>

  </body>
</html>